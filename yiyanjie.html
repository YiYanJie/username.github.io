<!doctype html><!--文档信息-->
<html lang="en"><!--跟标签-->
 <head><!--网页头部-->
  <meta charset="UTF-8"><!--字符编码-->
  <meta name="Generator" content="EditPlus®"><!--编辑器-->
  <meta name="Author" content="欧阳杰"><!--作者-->
  <!--网站三要素: 关键字 网页描述 标题-->
  <meta name="Keywords" content="关键字"><!--关键字-->
  <meta name="Description" content="小球弹弹弹"><!--网页描述-->
  <title>小球弹弹弹</title><!--网站标题-->
  <style type="text/css">/*写入样式*/
	body,div{margin:0;padding:0;}
	.clearfix:after{
		display:block;
		clear:both;
		content:"";
	}
	#box{
		position:absolute;
		width:100px;
		height:100px;
		border:20px solid #f26;
		border-radius:50%;
		background:#355;
	}
	.num{
		width:50px;
		height:50px;
		margin:50px auto;
		color:#f00;
		font-size:36px;
		text-align:center;
		line-height:50px;
		border:10px solid #f26;
	}
  </style>
 </head>
 <body><!--网页主体-->
	<div id="box" class="clearfix"></div>
	<div id="content">
		<div class="num clearfix">16</div>
	</div>
	<script>
		var oBox = document.getElementById("box"),
			oNum = document.querySelector(".num"),
			maxWidth = document.documentElement.clientWidth-oBox.offsetWidth,
			maxHeight = document.documentElement.clientHeight-oBox.offsetHeight,
			numWidth = document.documentElement.clientWidth-oNum.offsetLeft-oBox.offsetWidth-oNum.offsetWidth,
			numHeight = document.documentElement.clientHeight-oNum.offsetTop-oBox.offsetHeight-oNum.offsetHeight,
			lspeed = 10,
			tspeed = 10;
		oBox.top = oBox.offsetTop;
		oBox.left = oBox.offsetLeft;
		window.onresize = function(){
			var maxWidth = document.documentElement.clientWidth-oBox.offsetWidth,
				maxHeight = document.documentElement.clientHeight-oBox.offsetHeight;
		};
		function judgeCrash(obj) {
			this.first = obj.elem1;
			this.second = obj.elem2;
			this.fnS = obj.fnS;
			this.fnE = obj.fnE;
			this.judge = function() {
				var Stop = this.second.offsetTop;
				var Sleft = this.second.offsetLeft;
				var Ftop = this.first.offsetTop;
				var Fleft = this.first.offsetLeft;
				var minLeft = Fleft - this.second.offsetWidth;
				var maxLeft = Fleft + this.first.offsetWidth;
				var minTop = Ftop - this.second.offsetHeight;
				var maxTop = Ftop + this.first.offsetHeight;
				if (Sleft >= minLeft && Sleft <= maxLeft && Stop >= minTop && Stop <= maxTop) {
					if (this.fnS) { //判断fun有没有
						this.fnS();
						return;
					}
				}
				if (this.fnE) { //判断error有没有
					this.fnE();
				}
			}
			var fn = this.judge;
			this.first.onmousedown = function(event) {
				var t = this; //t=this.first
				console.log(t)
				var startX = event.clientX;
				var startY = event.clientY;
				var offX = t.offsetLeft;
				var offY = t.offsetTop;
				document.onmousemove = function(event) {
					var theleft = event.clientX - startX;
					var theTop = event.clientY - startY;
					fn();
					t.style.left = offX + theleft + 'px';
					t.style.top = offY + theTop + 'px';
				}
				document.onmouseup = function(event) {
					document.onmousemove = null;
				}
			}
		}



		judgeCrash({
			elem1: oBox,
			elem2: oNum,
			fnS: function() {
				console.log("Yes");
			},
			fnE: function() {

			}
		});

		judgeCrash({
			elem1: oNum,
			elem2: oBox,
			fnS: function() {
				console.log("Yes");
			},
			fnE: function() {

			}
		});

		(function move(){
			oBox.left +=lspeed;
			oBox.top +=tspeed;
			if(oBox.left <= 0){
				oBox.left = 0;
				lspeed = -lspeed;
			}
			if(oBox.top <= 0){
				oBox.top = 0;
				tspeed = -tspeed;
			}
			if(oBox.left >= numWidth){
				oBox.left = numWidth;
				oNum.style.cssText = "margin-right:"+584+"px;margin-left:"+684+"px;";
				oNum.innerText=oNum.innerText-1;
				if(oNum.innerText <= 0){
					oNum.style.cssText = "display:none;";
				}
				lspeed = -lspeed;
			}
			if(oBox.top >= numHeight){
				oBox.top = numHeight;
				tspeed = -tspeed;
			}
			oBox.style.cssText = "top:"+oBox.top+"px;left:"+oBox.left+"px;";
			requestAnimationFrame(move);
		})();
	</script>
 </body>
</html>
